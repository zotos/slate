<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;ruby&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the Lab Automated API Documentation. Lab Automated allows faster, more reliable static and dynamic security testing for mobile apps. Ongoing updates with our API will be kept up to date as functionality is released.</p>

<p>If you would like to trial Lab Automated, please go to https://lab.nowsecure.com and request access to our closed beta. You will be contacted shortly after by one of our Sales Representatives to set up a trial.</p>

<h2 id="authorization">Authorization</h2>

<p>Request and response bodies are json encoded.</p>

<p>All requests require an OAuth access token. You can find your access token by going to https://lab-beta.nowsecure.com/account. Authorization tokens are currently authorized for 24 hours.</p>

<p>All requests should include:</p>

<p><code class="prettyprint">Authorization: Bearer {NS_TOKEN}</code></p>

<h2 id="api-host">API Host</h2>

<p>The Lab Automated API is hosted at:</p>

<p>https://lab-api.nowsecure.com</p>

<h1 id="account">Account</h1>

<p>An <code class="prettyprint">Account</code> represents a Lab Automated account. Multiple accounts can be associated with a single instance of Lab Automated all with the ability to run assessments or view application results.</p>

<h2 id="view-account-details">View Account Details</h2>

<p>You can view account details for Lab Automated using the <code class="prettyprint">GET /account</code> path.</p>

<p><code class="prettyprint">shell
    curl -H &quot;Authorization: Bearer $NS_TOKEN&quot; -X GET $HOST/account
</code></p>

<p>The response will contain the period in which your account will be active along with the number of applications and assessments left on your account.</p>
<pre class="highlight json"><code><span class="w">    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"period"</span><span class="p">:</span><span class="w"> </span><span class="mi">172800</span><span class="p">,</span><span class="w">
      </span><span class="nt">"limits"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"assessments"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"363df3a1-0e8b-4960-bb6e-cc09aced37a1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="list-of-current-account-users">List of Current Account Users</h2>

<p>You can view users that are associated with an account using <code class="prettyprint">GET /account/user/</code>.</p>
<pre class="highlight shell"><code>    curl -H <span class="s2">"Authorization: Bearer </span><span class="nv">$NS_TOKEN</span><span class="s2">"</span> -X GET <span class="nv">$HOST</span>/account/user/
</code></pre>

<p>The response will contain the <code class="prettyprint">user id</code>, <code class="prettyprint">email</code>, and permissions for the user under <code class="prettyprint">scopes</code>. The <code class="prettyprint">account id</code> will also be returned. Each user will be associated with the same <code class="prettyprint">account</code></p>
<pre class="highlight json"><code><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"66a46874-eab4-4871-83c9-3b586968547c"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@nowsecure.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"scopes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"user:login"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"363df3a1-0e8b-4960-bb6e-cc09aced37a1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="view-user-profile">View User Profile</h2>

<p>You can view details about a specific user. Using <code class="prettyprint">GET /account/user/{id}</code>, you can view that users <code class="prettyprint">name</code>, <code class="prettyprint">email</code>, <code class="prettyprint">scope</code> also known as user permissions, and which <code class="prettyprint">account</code> they are associated with.</p>
<pre class="highlight shell"><code>  curl -H <span class="s2">"Authorization: Bearer </span><span class="nv">$NS_TOKEN</span><span class="s2">"</span> -X GET <span class="nv">$HOST</span>/account/user/27a03ce7-303f-440f-b02a-de2df2c41561
</code></pre>

<p>The .json response will include <code class="prettyprint">name</code>, <code class="prettyprint">email</code>, <code class="prettyprint">scope</code>, and associated <code class="prettyprint">account</code></p>
<pre class="highlight json"><code><span class="w">    </span><span class="p">{</span><span class="w">
     </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27a03ce7-303f-440f-b02a-de2df2c41561"</span><span class="p">,</span><span class="w">
     </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Charlie Painchaud"</span><span class="p">,</span><span class="w">
     </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example@nowsecure.com"</span><span class="p">,</span><span class="w">
     </span><span class="nt">"scopes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
       </span><span class="s2">"user:login"</span><span class="w">
     </span><span class="p">],</span><span class="w">
     </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60b923d9-7d14-4208-9630-f13075a58ffd"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="inviting-a-user">Inviting a User</h2>

<p>You can invite a user to join your Lab Automated account using <code class="prettyprint">POST /account/invite/</code>. Users currently will have the same scope and will upload apps and run assessments against the <code class="prettyprint">Account</code> limits.</p>

<h2 id="pending-invites">Pending Invites</h2>

<p>You can view a list of pending invites using <code class="prettyprint">GET /account/invite/</code>. This will return the <code class="prettyprint">name</code> and <code class="prettyprint">email</code> of each user that has been invited to the <code class="prettyprint">account</code></p>

<h2 id="removing-a-user">Removing a User</h2>

<p>Conversely, you can remove a user from your account using <code class="prettyprint">DELETE /account/user/{id}</code>. The user <code class="prettyprint">id</code> is returned in the <code class="prettyprint">GET /account/user/</code> response.</p>

<h1 id="applications">Applications</h1>

<p>An <code class="prettyprint">Application</code> or a binary is what Lab Automated will be performing the NowSecure Security Assessment against. An <code class="prettyprint">Application</code> is a fully compiled .apk or .ipa file that will be installed onto real devices and security tested statically and dynamically.</p>

<h2 id="submitting-an-application">Submitting an Application</h2>

<p>Using <code class="prettyprint">POST /build/</code> will create a new application and kick off an assessment with the previously set configuration options. If it is the first time an application has been uploaded, the assessment will start with the default configuration options.</p>
<pre class="highlight shell"><code>curl -H <span class="s2">"Authorization: Bearer </span><span class="nv">$NS_TOKEN</span><span class="s2">"</span> -X POST <span class="nv">$HOST</span>/build/ --data-binary @bin.apk
</code></pre>

<h2 id="view-all-applications">View all Applications</h2>

<p>You can list all of the applications associated with an account using <code class="prettyprint">GET /app/</code>.</p>
<pre class="highlight shell"><code>    curl -H <span class="s2">"Authorization: Bearer </span><span class="nv">$NS_TOKEN</span><span class="s2">"</span> -X GET <span class="nv">$HOST</span>/app/
</code></pre>

<p>For each <code class="prettyprint">Application</code> the response will contain the apps <code class="prettyprint">platform</code>, <code class="prettyprint">package</code> name, associated <code class="prettyprint">account</code>, and <code class="prettyprint">created</code> date.</p>
<pre class="highlight json"><code><span class="w">    </span><span class="p">{</span><span class="w">
    </span><span class="nt">"platform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"android"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"package"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fuzion24.dynamictestapp"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"363df3a1-0e8b-4960-bb6e-cc09aced37a1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-07T20:29:15.769Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="create-an-application-resource">Create an Application Resource</h2>

<p>Using <code class="prettyprint">POST /app/</code>, you can create an application resource that does not have a binary associated with it. To run an assessment you must upload a binary with the same <code class="prettyprint">package</code> name and <code class="prettyprint">platform</code>.</p>
<pre class="highlight shell"><code>    curl -H <span class="s2">"Authorization: Bearer </span><span class="nv">$NS_TOKEN</span><span class="s2">"</span> -X POST <span class="nv">$HOST</span>/app/ -d <span class="s1">'{"platform": "android", "package": "com.example.app"}'</span>
</code></pre>

<p>Like the application response, when an application resource is created it will return the apps <code class="prettyprint">platform</code>, <code class="prettyprint">package</code> name, associated <code class="prettyprint">account</code>, and <code class="prettyprint">created</code> date.</p>
<pre class="highlight json"><code><span class="w">    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"platform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"android"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"package"</span><span class="p">:</span><span class="w"> </span><span class="s2">"com.example.app"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"363df3a1-0e8b-4960-bb6e-cc09aced37a1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-08T19:06:00.257Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="get-application-details">Get Application Details</h2>

<p>You can also get specific application details  using <code class="prettyprint">GET /app/{platform}/{package}</code>.</p>
<pre class="highlight shell"><code>    curl -H <span class="s2">"Authorization: Bearer </span><span class="nv">$NS_TOKEN</span><span class="s2">"</span> -X GET <span class="nv">$HOST</span>/app/android/com.example.app
</code></pre>

<p>The response will contain the apps <code class="prettyprint">platform</code>, <code class="prettyprint">package</code> name, associated <code class="prettyprint">account</code>, and <code class="prettyprint">created</code> date.</p>
<pre class="highlight json"><code><span class="w">    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"platform"</span><span class="p">:</span><span class="w"> </span><span class="s2">"android"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"package"</span><span class="p">:</span><span class="w"> </span><span class="s2">"com.example.app"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"363df3a1-0e8b-4960-bb6e-cc09aced37a1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-08T19:06:00.257Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="view-application-configuration">View Application Configuration</h2>

<p>Application configuration is set by <code class="prettyprint">package</code> name. Each <code class="prettyprint">package</code> can have its own individual application configuration.</p>

<p>You can view a specific applications configuration using <code class="prettyprint">GET /app/{platform}/{package}/config</code></p>
<pre class="highlight shell"><code>    curl -H <span class="s2">"Authorization: Bearer </span><span class="nv">$NS_TOKEN</span><span class="s2">"</span> -X GET <span class="nv">$HOST</span>/app/android/com.example.app/config
</code></pre>

<p>The response will show which configuration options are set for that specific package.</p>
<pre class="highlight json"><code><span class="w">    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"dynamic"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"search_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Franz Kafka"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nt">"username"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fkafka"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foobar"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"franzkafka@metamorphosis.com"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"config_options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"multipass"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"static"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="set-application-configuration">Set Application Configuration</h2>

<p>Using the <code class="prettyprint">POST /app/{platform}/{package}/config</code> endpoint will allow the configuration for a specific application package to be set.</p>

<p>You can mark specific static tests <code class="prettyprint">&quot;static&quot;: { &quot;secure_random_check&quot;: &quot;false&quot; }</code> and this command will run every test except the secure random check.</p>

<h3 id="android-static-tests">Android Static Tests</h3>
<pre class="highlight plaintext"><code>    certificate_validity_check
    debug_flag_check
    keysize_check
    master_key_check
    obfuscation_check
    secure_random_check
    dynamic_code_loading_check
    application_overprivileged_check
    allow_backup_check
    javascript_interface_check
    urls_check
    decode_apk_check
    decompile_apk_check
    get_app_files
    get_native_methods
    get_reflection_code
    app_activities
    main_activity
</code></pre>

<h3 id="multipass">Multipass</h3>

<p>Multipass mode is a mode which causes analysis to be done on the application multiple times to allow different &ldquo;passes&rdquo; of analysis to occur. For example, if we are actively man-in-the-middling an application, we may not be able to exercise the full functionality of the app if the app is cert pinning. We could run the application with all cert validations disabled, but this would not give us any insight into whether or not the app was properly checking certs. In this way, the app would need to be ran multiple times with different analysis options with and without certificate validation killed. In it&rsquo;s current implementation, multipass does exactly this. It runs the app once while mitming allowing whatever TLS validations are in place to take over, and once more with certificate checking disabled.</p>
<pre class="highlight shell"><code>    curl -H <span class="s2">"Authorization: Bearer </span><span class="nv">$NS_TOKEN</span><span class="s2">"</span> -X POST <span class="nv">$HOST</span>/app/android/com.example.app/config -d <span class="s1">'{
      "dynamic": {
        "search_data": {
          "name": {
            "value": "Franz Kafka"
          },
          "username": {
            "value": "fkafka"
          },
          "password": {
            "value": "foobar"
          },
          "email": {
            "value": "franzkafka@metamorphosis.com"
          }
        },
        "config_options": {
          "multipass": true
        }
      },
      "static": "true"
    }'</span>
</code></pre>

<p>In this example the <code class="prettyprint">name</code>, <code class="prettyprint">username</code>, <code class="prettyprint">email</code>, and <code class="prettyprint">password</code> were set to the login credentials for the sample application. This will allow the UI Automator on the rig to successfully login to the application to further exercise the UI for test coverage.</p>

<h2 id="trigger-application-assessment">Trigger Application Assessment</h2>

<p>After changing the configurations, using <code class="prettyprint">POST /app/{platform}/{package}/assessment/</code> will trigger an assessment on the most recent build of the application with the new configuration options.</p>
<pre class="highlight shell"><code>    curl -H <span class="s2">"Authorization: Bearer </span><span class="nv">$NS_TOKEN</span><span class="s2">"</span> -X POST <span class="nv">$HOST</span>/app/platform/com.example.app/assessment/
</code></pre>

<p>The assessment endpoint will return a response containing that specific applications <code class="prettyprint">task</code> id.</p>

<h2 id="view-assessment-report">View Assessment Report</h2>

<p>You can view the assessment response in json using <code class="prettyprint">GET /app/{platform}/{package}/assessment/{task}/report</code>.</p>
<pre class="highlight shell"><code>    curl -H <span class="s2">"Authorization: Bearer </span><span class="nv">$NS_TOKEN</span><span class="s2">"</span> -X GET <span class="nv">$HOST</span>/app/platform/com.example.app/assessment/task/report
</code></pre>

<p>The report contains all of the information from our NowSecure Automated Security Assessment. You can view the report formatted with descriptions and recommendations at https://lab.nowsecure.io/app/{platform}/{package}/assessment</p>

          <h1 id="errors">Errors</h1>

<aside class="notice">This error section is stored in a separate file in `includes/_errors.md`. Slate allows you to optionally separate out your docs into many files&hellip;just save them to the `includes` folder and add them to the top of your `index.md`&rsquo;s frontmatter. Files are included in the order listed.</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request sucks</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The kitten requested is hidden for administrators only</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified kitten could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a kitten with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that isn&rsquo;t json</td>
</tr>
<tr>
<td>410</td>
<td>Gone &ndash; The kitten requested has been removed from our servers</td>
</tr>
<tr>
<td>418</td>
<td>I&rsquo;m a teapot</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
